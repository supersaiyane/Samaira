<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="686px" preserveAspectRatio="none" style="width:1143px;height:686px;background:#FFFFFF;" version="1.1" viewBox="0 0 1143 686" width="1143px" zoomAndPan="magnify"><title>Samaira Cost Forecasting v3 - Multi-Model + Drift Detection</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="474.8242" x="330.4302" y="27.9951">Samaira Cost Forecasting v3 - Multi-Model + Drift Detection</text><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="19.9551" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="120.8906" y2="591.8828"/></g><g><title>Airflow DAG</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="206.9058" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="210.0386" x2="210.0386" y1="120.8906" y2="591.8828"/></g><g><title>Postgres</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="402.6416" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="406.5186" x2="406.5186" y1="120.8906" y2="591.8828"/></g><g><title>Forecasting Engine</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="588.3652" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="591.7646" x2="591.7646" y1="120.8906" y2="591.8828"/></g><g><title>Drift Detection</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="793.9653" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="796.9658" x2="796.9658" y1="120.8906" y2="591.8828"/></g><g><title>Observability Stack</title><rect fill="#000000" fill-opacity="0.00000" height="470.9922" width="8" x="1040.6221" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1044.5596" x2="1044.5596" y1="120.8906" y2="591.8828"/></g><g class="participant participant-head" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="117.5889">User</text><ellipse cx="23.9551" cy="53.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,61.0938 L23.9551,88.0938 M10.9551,69.0938 L36.9551,69.0938 M23.9551,88.0938 L10.9551,103.0938 M23.9551,88.0938 L36.9551,103.0938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="603.8779">User</text><ellipse cx="23.9551" cy="615.6797" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,623.6797 L23.9551,650.6797 M10.9551,631.6797 L36.9551,631.6797 M23.9551,650.6797 L10.9551,665.6797 M23.9551,650.6797 L36.9551,665.6797" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="DAG"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.7344" x="129.0386" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7129" x="169.0493" y="93.292">Airflow DAG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.7344" x="136.0386" y="109.5889">(cost_forecasting_v3)</text></g><g class="participant participant-tail" data-participant="DAG"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.7344" x="129.0386" y="590.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7129" x="169.0493" y="610.8779">Airflow DAG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.7344" x="136.0386" y="627.1748">(cost_forecasting_v3)</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3408" x="373.4712" y="101.292">Postgres</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2461" x="340.5186" y="117.5889">(billing, forecasts)</text><path d="M388.6416,52.2969 C388.6416,42.2969 406.6416,42.2969 406.6416,42.2969 C406.6416,42.2969 424.6416,42.2969 424.6416,52.2969 L424.6416,78.2969 C424.6416,88.2969 406.6416,88.2969 406.6416,88.2969 C406.6416,88.2969 388.6416,88.2969 388.6416,78.2969 L388.6416,52.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M388.6416,52.2969 C388.6416,62.2969 406.6416,62.2969 406.6416,62.2969 C406.6416,62.2969 424.6416,62.2969 424.6416,52.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3408" x="373.4712" y="603.8779">Postgres</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2461" x="340.5186" y="620.1748">(billing, forecasts)</text><path d="M388.6416,633.4766 C388.6416,623.4766 406.6416,623.4766 406.6416,623.4766 C406.6416,623.4766 424.6416,623.4766 424.6416,633.4766 L424.6416,659.4766 C424.6416,669.4766 406.6416,669.4766 406.6416,669.4766 C406.6416,669.4766 388.6416,669.4766 388.6416,659.4766 L388.6416,633.4766" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M388.6416,633.4766 C388.6416,643.4766 406.6416,643.4766 406.6416,643.4766 C406.6416,643.4766 424.6416,643.4766 424.6416,633.4766" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Engine"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="219.2012" x="482.7646" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1279" x="525.3013" y="93.292">Forecasting Engine</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205.2012" x="489.7646" y="109.5889">(Prophet, ARIMA, SMA, LSTM)</text></g><g class="participant participant-tail" data-participant="Engine"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="219.2012" x="482.7646" y="590.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1279" x="525.3013" y="610.8779">Forecasting Engine</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205.2012" x="489.7646" y="627.1748">(Prophet, ARIMA, SMA, LSTM)</text></g><g class="participant participant-head" data-participant="Drift"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.999" x="711.9658" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.3047" x="746.313" y="93.292">Drift Detection</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.999" x="718.9658" y="109.5889">(MAPE/RMSE, Alerting)</text></g><g class="participant participant-tail" data-participant="Drift"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171.999" x="711.9658" y="590.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.3047" x="746.313" y="610.8779">Drift Detection</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157.999" x="718.9658" y="627.1748">(MAPE/RMSE, Alerting)</text></g><g class="participant participant-head" data-participant="Obs"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174.125" x="957.5596" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9736" x="976.6353" y="93.292">Observability Stack</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.125" x="964.5596" y="109.5889">(Prometheus, Grafana)</text></g><g class="participant participant-tail" data-participant="Obs"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174.125" x="957.5596" y="590.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9736" x="976.6353" y="610.8779">Observability Stack</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.125" x="964.5596" y="627.1748">(Prometheus, Grafana)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1136.6846" x="0" y="151.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="151.457" y2="151.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="154.457" y2="154.457"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="126.4106" x="505.137" y="140.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.8848" x="511.137" y="156.9575">Data Ingestion</text><g class="message" data-participant-1="U" data-participant-2="DAG"><polygon fill="#181818" points="198.9058,191.1563,208.9058,195.1563,198.9058,199.1563,202.9058,195.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="204.9058" y1="195.1563" y2="195.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.9507" x="30.9551" y="190.0903">Trigger daily forecast job</text></g><g class="message" data-participant-1="DAG" data-participant-2="DB"><polygon fill="#181818" points="394.6416,220.2891,404.6416,224.2891,394.6416,228.2891,398.6416,224.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="210.9058" x2="400.6416" y1="224.2891" y2="224.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.7358" x="217.9058" y="219.2231">Fetch billing/usage history</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1136.6846" x="0" y="252.8555"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="252.8555" y2="252.8555"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="255.8555" y2="255.8555"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="105.0127" x="515.8359" y="242.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.4868" x="521.8359" y="258.356">Forecasting</text><g class="message" data-participant-1="DB" data-participant-2="Engine"><polygon fill="#181818" points="580.3652,292.5547,590.3652,296.5547,580.3652,300.5547,584.3652,296.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="406.6416" x2="586.3652" y1="296.5547" y2="296.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.4106" x="413.6416" y="291.4888">Historical cost data</text></g><g class="message" data-participant-1="Engine" data-participant-2="DB"><polygon fill="#181818" points="417.6416,321.6875,407.6416,325.6875,417.6416,329.6875,413.6416,325.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="411.6416" x2="591.3652" y1="325.6875" y2="325.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.4077" x="423.6416" y="320.6216">Store forecasts</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1136.6846" x="0" y="354.2539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="354.2539" y2="354.2539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="357.2539" y2="357.2539"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="127.7817" x="504.4514" y="343.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109.2559" x="510.4514" y="359.7544">Drift Detection</text><g class="message" data-participant-1="DB" data-participant-2="Drift"><polygon fill="#181818" points="785.9653,393.9531,795.9653,397.9531,785.9653,401.9531,789.9653,397.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="406.6416" x2="791.9653" y1="397.9531" y2="397.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.5498" x="413.6416" y="392.8872">Compare forecasts vs actuals</text></g><g class="message" data-participant-1="Drift" data-participant-2="Obs"><polygon fill="#181818" points="1032.6221,438.2188,1042.6221,442.2188,1032.6221,446.2188,1036.6221,442.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="797.9653" x2="1038.6221" y1="442.2188" y2="442.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.8589" x="804.9653" y="422.02">Push metrics</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.6567" x="804.9653" y="437.1528">(forecast_accuracy, forecast_drift)</text></g><g class="message" data-participant-1="Drift" data-participant-2="DAG"><polygon fill="#181818" points="221.9058,482.4844,211.9058,486.4844,221.9058,490.4844,217.9058,486.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="215.9058" x2="796.9653" y1="486.4844" y2="486.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.0801" x="227.9058" y="466.2856">Trigger anomaly DAG</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.8691" x="227.9058" y="481.4185">if drift &gt; threshold</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1136.6846" x="0" y="515.0508"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="515.0508" y2="515.0508"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1136.6846" y1="518.0508" y2="518.0508"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="112.9155" x="511.8845" y="504.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94.3896" x="517.8845" y="520.5513">Visualization</text><g class="message" data-participant-1="Obs" data-participant-2="U"><polygon fill="#181818" points="34.9551,569.8828,24.9551,573.8828,34.9551,577.8828,30.9551,573.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="28.9551" x2="1043.6221" y1="573.8828" y2="573.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.0376" x="40.9551" y="553.6841">Grafana dashboards</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264.6338" x="40.9551" y="568.8169">(Actual vs Predicted, Model Comparison)</text></g><!--SRC=[NLD1Rjim4Bpp5GkVQjH63ha5S02bTj805If4SKy1Z1L5ITlIf45IBjpNTodAbTMBBfoPdPrP1GfQGOb798VmnVe0pzOfYJwGQU5y3sl8UnredTjQQVWCMqTDWAqAIWQoHWYKmJhOU-K0FUp52LqWIISq0HOPkKRRtx3DNZxC9ydwXsRIFvplbul8ucTHOy0AlO95mR3MAS-CYhHcu0gkB3yIdkPpRatlJ4j6CRbmzjIfi8BixJNFLb36pxVoFKyQ2JVN-Myx5icpOdVtbfSxbj7AnGcZXGYTixzNdC8PsJI52vG1vQzauwX2ftg_WXU73HfC2WmNOhE1BMyEhwPLFiw4pKRiOVqOGu47U7VKjfnjZQGl_sA0dxOI4H1nJmnxLa5sCCPrrtji5NJakPhBCECs81x076Qc19ZzTK2IH0sn8uXTYF7rEg5aX9fwICxdSKtAwU61B-h82TtGuEo1BwP7xKK2CPg3O6pH-muuAVOHgxzI3YXbxr1UfYCur96vd0JcKQ6nH-ImXgEZ1WOqF4Be-AWwg-l1-m_ox8B-uDLvTC5QUrOQQ-8SV5TPT7Kqb0ssumA5KpN9eEeLfDyYhKdUckLV]--></g></svg>