<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="773px" preserveAspectRatio="none" style="width:1221px;height:773px;background:#FFFFFF;" version="1.1" viewBox="0 0 1221 773" width="1221px" zoomAndPan="magnify"><title>Cost Forecasting v3 - Sequence Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="290.8418" x="461.1855" y="27.9951">Cost Forecasting v3 - Sequence Flow</text><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="900.9111" x="107.3081" y="543.4844"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="19.9551" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="120.8906" y2="679.0156"/></g><g><title>Airflow DAG</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="195.1753" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="198.3081" x2="198.3081" y1="120.8906" y2="679.0156"/></g><g><title>Postgres</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="438.9692" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="442.8462" x2="442.8462" y1="120.8906" y2="679.0156"/></g><g><title>Forecasting Engine</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="792.8506" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="796.7866" x2="796.7866" y1="120.8906" y2="679.0156"/></g><g><title>Drift Detection</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="935.5669" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="938.9146" x2="938.9146" y1="120.8906" y2="679.0156"/></g><g><title>Prometheus.Grafana</title><rect fill="#000000" fill-opacity="0.00000" height="558.125" width="8" x="1125.7041" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1129.1953" x2="1129.1953" y1="120.8906" y2="679.0156"/></g><g class="participant participant-head" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="117.5889">User</text><ellipse cx="23.9551" cy="53.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,61.0938 L23.9551,88.0938 M10.9551,69.0938 L36.9551,69.0938 M23.9551,88.0938 L10.9551,103.0938 M23.9551,88.0938 L36.9551,103.0938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="691.0107">User</text><ellipse cx="23.9551" cy="702.8125" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,710.8125 L23.9551,737.8125 M10.9551,718.8125 L36.9551,718.8125 M23.9551,737.8125 L10.9551,752.8125 M23.9551,737.8125 L36.9551,752.8125" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="DAG"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.7344" x="117.3081" y="73.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7129" x="157.3188" y="93.292">Airflow DAG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.7344" x="124.3081" y="109.5889">(cost_forecasting_v3)</text></g><g class="participant participant-tail" data-participant="DAG"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163.7344" x="117.3081" y="678.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7129" x="157.3188" y="698.0107">Airflow DAG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.7344" x="124.3081" y="714.3076">(cost_forecasting_v3)</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3408" x="409.7988" y="101.292">Postgres</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2461" x="376.8462" y="117.5889">(billing, forecasts)</text><path d="M424.9692,52.2969 C424.9692,42.2969 442.9692,42.2969 442.9692,42.2969 C442.9692,42.2969 460.9692,42.2969 460.9692,52.2969 L460.9692,78.2969 C460.9692,88.2969 442.9692,88.2969 442.9692,88.2969 C442.9692,88.2969 424.9692,88.2969 424.9692,78.2969 L424.9692,52.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M424.9692,52.2969 C424.9692,62.2969 442.9692,62.2969 442.9692,62.2969 C442.9692,62.2969 460.9692,62.2969 460.9692,52.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3408" x="409.7988" y="691.0107">Postgres</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.2461" x="376.8462" y="707.3076">(billing, forecasts)</text><path d="M424.9692,720.6094 C424.9692,710.6094 442.9692,710.6094 442.9692,710.6094 C442.9692,710.6094 460.9692,710.6094 460.9692,720.6094 L460.9692,746.6094 C460.9692,756.6094 442.9692,756.6094 442.9692,756.6094 C442.9692,756.6094 424.9692,756.6094 424.9692,746.6094 L424.9692,720.6094" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M424.9692,720.6094 C424.9692,730.6094 442.9692,730.6094 442.9692,730.6094 C442.9692,730.6094 460.9692,730.6094 460.9692,720.6094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Engine"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.1279" x="722.7866" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1279" x="729.7866" y="109.5889">Forecasting Engine</text></g><g class="participant participant-tail" data-participant="Engine"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148.1279" x="722.7866" y="678.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134.1279" x="729.7866" y="698.0107">Forecasting Engine</text></g><g class="participant participant-head" data-participant="Drift"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.3047" x="880.9146" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.3047" x="887.9146" y="109.5889">Drift Detection</text></g><g class="participant participant-tail" data-participant="Drift"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.3047" x="880.9146" y="678.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.3047" x="887.9146" y="698.0107">Drift Detection</text></g><g class="participant participant-head" data-participant="Obs"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1050.1953" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0176" x="1057.1953" y="109.5889">Prometheus/Grafana</text></g><g class="participant participant-tail" data-participant="Obs"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1050.1953" y="678.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0176" x="1057.1953" y="698.0107">Prometheus/Grafana</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1214.2129" x="0" y="151.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="151.457" y2="151.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="154.457" y2="154.457"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="72.1001" x="571.0564" y="140.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="53.5742" x="577.0564" y="156.9575">Trigger</text><g class="message" data-participant-1="U" data-participant-2="DAG"><polygon fill="#181818" points="187.1753,191.1563,197.1753,195.1563,187.1753,199.1563,191.1753,195.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="193.1753" y1="195.1563" y2="195.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.2202" x="30.9551" y="190.0903">Trigger DAG run (daily)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1214.2129" x="0" y="223.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="223.7227" y2="223.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="226.7227" y2="226.7227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="126.4106" x="543.9011" y="213.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.8848" x="549.9011" y="229.2231">Data Ingestion</text><g class="message" data-participant-1="DAG" data-participant-2="DB"><polygon fill="#181818" points="430.9692,263.4219,440.9692,267.4219,430.9692,271.4219,434.9692,267.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="199.1753" x2="436.9692" y1="267.4219" y2="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.7939" x="206.1753" y="262.356">Fetch historical billing/usage data</text></g><g class="message" data-participant-1="DB" data-participant-2="DAG"><polygon fill="#181818" points="210.1753,292.5547,200.1753,296.5547,210.1753,300.5547,206.1753,296.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="204.1753" x2="441.9692" y1="296.5547" y2="296.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.1611" x="216.1753" y="291.4888">Return time-series cost data</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1214.2129" x="0" y="325.1211"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="325.1211" y2="325.1211"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="328.1211" y2="328.1211"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="105.0127" x="554.6001" y="314.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.4868" x="560.6001" y="330.6216">Forecasting</text><g class="message" data-participant-1="DAG" data-participant-2="Engine"><polygon fill="#181818" points="784.8506,364.8203,794.8506,368.8203,784.8506,372.8203,788.8506,368.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="199.1753" x2="790.8506" y1="368.8203" y2="368.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261.4282" x="206.1753" y="363.7544">Run Prophet, ARIMA, SMA, LSTM models</text></g><g class="message" data-participant-1="Engine" data-participant-2="DB"><polygon fill="#181818" points="453.9692,393.9531,443.9692,397.9531,453.9692,401.9531,449.9692,397.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="447.9692" x2="795.8506" y1="397.9531" y2="397.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329.8813" x="459.9692" y="392.8872">Store forecasts (model_used, forecast_amount, CI)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1214.2129" x="0" y="426.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="426.5195" y2="426.5195"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="429.5195" y2="429.5195"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="127.7817" x="543.2156" y="415.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109.2559" x="549.2156" y="432.02">Drift Detection</text><g class="message" data-participant-1="DAG" data-participant-2="Drift"><polygon fill="#181818" points="927.5669,466.2188,937.5669,470.2188,927.5669,474.2188,931.5669,470.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="199.1753" x2="933.5669" y1="470.2188" y2="470.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.5498" x="206.1753" y="465.1528">Compare forecasts vs actuals</text></g><g class="message" data-participant-1="Drift" data-participant-2="DB"><polygon fill="#181818" points="453.9692,495.3516,443.9692,499.3516,453.9692,503.3516,449.9692,499.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="447.9692" x2="938.5669" y1="499.3516" y2="499.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.8462" x="459.9692" y="494.2856">Store drift metrics (MAPE, RMSE)</text></g><g class="message" data-participant-1="Drift" data-participant-2="Obs"><polygon fill="#181818" points="1117.7041,524.4844,1127.7041,528.4844,1117.7041,532.4844,1121.7041,528.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="939.5669" x2="1123.7041" y1="528.4844" y2="528.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.1372" x="946.5669" y="523.4185">Push Prometheus metrics</text></g><path d="M107.3081,543.4844 L171.751,543.4844 L171.751,550.6172 L161.751,560.6172 L107.3081,560.6172 L107.3081,543.4844" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="900.9111" x="107.3081" y="543.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="122.3081" y="556.5513">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114.8555" x="186.751" y="555.6948">[Drift &gt; threshold]</text><g class="message" data-participant-1="Drift" data-participant-2="DAG"><polygon fill="#181818" points="210.1753,577.75,200.1753,581.75,210.1753,585.75,206.1753,581.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="204.1753" x2="938.5669" y1="581.75" y2="581.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.0801" x="216.1753" y="576.6841">Trigger anomaly DAG</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1214.2129" x="0" y="617.3164"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="617.3164" y2="617.3164"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1214.2129" y1="620.3164" y2="620.3164"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="112.9155" x="550.6487" y="606.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94.3896" x="556.6487" y="622.8169">Visualization</text><g class="message" data-participant-1="Obs" data-participant-2="U"><polygon fill="#181818" points="34.9551,657.0156,24.9551,661.0156,34.9551,665.0156,30.9551,661.0156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="28.9551" x2="1128.7041" y1="661.0156" y2="661.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="400.8037" x="40.9551" y="655.9497">Grafana dashboards (Actual vs Predicted, Model Comparison)</text></g><!--SRC=[LLB1QkCm4BthAuQS4eZfeRT22cwJbC2QDN6pfuKmiIUsG9Qo6ZbBz-jtv3Xrx8EnfVTctdipGGT3yEuumDPvAf63jZLSdo61WlvqP4k2hN5_bS8oE0y79W_8S50Nz46N-e8sm2pL_YmeMASVl-syb7h7yrZlU7rUp29BhbM50K_81BDSOBKd5iP96oF09TnPF13UfdqUHMvihItriDld5Bhs-XnWJO7Ae9szbOjdKrZkNKkXeOwVFZoUqMAF_7bYfLOh-FIwhiNoQgKEaBn61_3oVHh_V6TXNg4sNukUiHP_iBCrSMmRYH4LgM_2t58e6sWqIvYwH0E3ywUEiIQ8uIW19j-jzXGwRo7ebXB9NXD3ZFU6ZFqU8ncRtHA9V94d7YyDXIMa-rsMBg68hn_5PmQjgyYm6j39NMKXwcYS1SnxtB5ZgiOH7R5rdPMgxxl1-JJnH-lzpOiiMYlXFrQ-CiXYTIWYRg2fXAe_am59M28ZI_FD4lPPiLcCS1cLuFEE6nY7UUSeD65e_mgXaMrhdAaKo3FscymKhMlHVFMxIhRgdVtIB1BrFxpxYZrZMWSX3ciZ4-7cvD1N8ZJjFKLtkQTAbo46byKGXmmqExlu3m00]--></g></svg>